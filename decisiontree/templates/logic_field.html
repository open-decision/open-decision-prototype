{% load static %}
  {{ logic.management_form }}
<div class="logic-formset">
{% for logic_form in logic %}
  {{ logic_form.as_p }}
  {% endfor %}
</div>
<input type="hidden" id="input_hidden_field" value="" />

<script src="{% static '/jquery.formset.js' %}"></script>
<script>
$('.logic-formset').formset({
    addText: 'Logik hinzuf√ºgen',
    deleteText: 'Logik Entfernen',
    addCssClass: "btn btn-primary btn_alignment logic_add",
    deleteCssClass: "btn btn-primary btn_alignment",
    prefix: 'logic',
    formCssClass:'logic-formset'
});
  </script>

  <link rel="stylesheet" href="{% static '/jquery.datetimepicker.min.css' %}"/>
  <script src="{% static '/jquery.datetimepicker.full.min.js' %}"></script>

  <script>
  $(function () {
    $(".datepicker").datetimepicker({
      timepicker:false,
      format:'d.m.Y'
    });
  });
</script>

<script>

  $( function() {
    //var loadNodesUrl= $("#nodeForm").attr("load-nodes-url");
    var loadNodesUrl="{% url 'ajax_load_nodes' %}";
    var selectedTree = $("#selectedTree").val();
    var availableNodes = [];
    $.ajax({
      url: loadNodesUrl,
      data: {
        'selected_tree': selectedTree
      },
      success: function (data) {
        $('#input_hidden_field').val(JSON.stringify(data));
        console.log(data);
      }
    });
    var availableNodes = $('#input_hidden_field').val();
          availableNodes = JSON.parse(availableNodes);
    $( "input[name^='logic']" ).autocomplete({
      source: availableNodes;
    });
  } );
</script>
